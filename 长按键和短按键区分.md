原理依旧用到定时器
![[Pasted image 20260113164823.png]]设置TIM3
PSC设置为8000-1
ARR默认为最大值
注：此时不需要打开定时器中断即NV
![[Pasted image 20260113171053.png]]
此处有一个bug导致count初始化为2
因为B1_next_state默认初始化为0；
此处仍然需要添加使能函数，因为与中断无关，所以使能函数为HAL_TIM_Base_Start(&htim3);不带IT的版本